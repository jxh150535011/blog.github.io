
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<style type="text/css">
	html,body{padding: 0px;margin: 0px;width: 100%;height: 100%;}
	a{
		color: #337ab7;
		text-decoration: none;
		background-color: transparent;
	}
	.text-warning {
		color: #8a6d3b;
	}
	a.text-warning:hover,
	a.text-warning:focus {
		color: #66512c;
	}
	.text-info {
		color: #31708f;
	}
	a.text-info:hover,
	a.text-info:focus {
		color: #245269;
	}
	.text-muted {
		color: #777777;
	}
	.text-primary {
		color: #337ab7;
	}
	a.text-primary:hover,
	a.text-primary:focus {
		color: #286090;
	}
	h4 small{
		font-weight: normal;
		line-height: 1;
		color: #777777;
	}
	.code-comment{
		font-family: Consolas,Inconsolata,Courier,monospace;
		font-size: 14px;
		line-height: 14px;
		text-align: left;
		width: 400px;
		position: absolute;
	}

	.bugfont{
		display: none;
		text-align: center;
		vertical-align:middle;
		width: 48px;
		height: 48px;
		font-size:48px;
		font-weight: bold;
		line-height: 48px;
		position:absolute;
	}

	@keyframes rotate {
		from {
			transform: rotate(0deg);
		}
		to {
			transform: rotate(360deg);
		}
	}
	.ani-rotate{
		animation: rotate 1s linear infinite; 
	}
	@keyframes font-gradient {
		from {
	        background: linear-gradient(to top,#ff7875 0%, #777777 0%);
		}
		to {
			background: linear-gradient(to top,#ff7875 100%, #777777 100%);
		}
	}
	.ani-font-gradient{
	    -webkit-background-clip: text;
	    -moz-background-clip: text;
	    background-clip: text;
		color: transparent;
		animation: font-gradient 1s linear; 
	}

	.ani-font-translate span{
		position: absolute;
		overflow: hidden;
		top:0px;left: 0px;
		width: 12px;height: 12px;
		color: red;
		transition:transform 400ms linear 0ms;
		background: #fff;
	}
	.ani-font-translate .s1{
		transform: translateY(12px);

	}
	.ani-font-translate .s2{
		transform: translateY(-12px);
	}
	.ani-font-translate.active .s1{
		transform: translateY(0px);
	}
	.ani-font-translate.active .s2{
		transform: translateY(0px);
	}

	#fixFont {
		position: relative;
		overflow: hidden;
		display: inline-block;
		vertical-align: top;
		height: 12px;
		line-height: 12px;
	}
	#message1{
		height: 12px;
		line-height: 12px;
		display: block;
	}

</style>
<script>
</script>
</head>
<body>
<div style="position: relative;">
<pre id="gold" class="code-comment" style="display: none;">
<code>
                    _ooOoo_
                   o8888888o
                   88" . "88
                   (| -_- |)
                    O\ = /O
                ____/`---'\____
              .   ' \\| |// `.
               / \\||| : |||// \
             / _||||| -:- |||||- \
               | | \\\ - /// | |
             | \_| ''\---/'' | |
              \ .-\__ `-` ___/-. /
           ___`. .' /--.--\ `. . __
        ."" '< `.___\_<|>_/___.' >'"".
       | | : `- \`.;`\ _ /`;.`/ - ` : | |
         \ \ `-. \_ __\ /__ _/ .-` / /
 ======`-.____`-.___\_____/___.-`____.-'======
                    `=---='
 .............................................
          佛祖镇楼                  BUG辟易
</code>
</pre>
</div>
	<div style="width: 100%;text-align: center;">
		<h1>Hello World</h1>
		<h3>
		<a class="text-info" href="http://tools.jinxingheng.com/test/text/note.php" target="_self">上古工具包</a>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<small style="font-size: 12px" class="text-muted"><a class="text-warning" href="https://github.com/jxh150535011/jxhtools" target="_blank">更多内容</a>
		</small>
		</h3>
		<h3>
		<a class="text-info" href="https://www.npmjs.com/package/mkpack" target="_blank">mkpack</a>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<small style="font-size: 12px" class="text-muted">别人家的:<a class="text-warning" href="https://www.npmjs.com/package/webpack" target="_blank">webpack</a>
		</small>
		</hh32>
		<h3>
		<a class="text-info" href="https://www.npmjs.com/package/datetime-standard" target="_blank">datetime</a>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<small style="font-size: 12px" class="text-muted">别人家的:<a class="text-warning" href="http://momentjs.cn/" target="_blank">momentjs</a>
		</small>
		</h3>
		<h6 id="message1" class="text-muted">都是九年义务教育.... 为何别人....人还是得有追<span id="fixFont">术</span>、信仰的....</h6>
		<h6 id="message2" style="height: 150px;"></h6>
<div id="bugFont" class="bugfont">术</div>

	</div>



    <div style="position:fixed;bottom: 0px;text-align: center;height: 40px;line-height: 20px;font-size: 12px;color: #ccc;background: #3e3e69;width: 100%;">
    <a href="http://www.beian.miit.gov.cn"  style="color: #fff" target="_blank">浙ICP备17028784号</a>
    &nbsp;<br/>
    github:<a href="https://jxh150535011.github.io/" style="color: #fff" target="_blank">https://jxh150535011.github.io/</a> for mcl
    </div>
    <script type="text/javascript">
    	if(!Array.prototype.forEach){
    		Array.prototype.forEach = function(fn){
    			for (var i =0,len = this.length; i < len; i++) {
    				fn&&fn(this[i],i);
    			}
    		}
    	}
    	if(!Array.prototype.map){
    		Array.prototype.map = function(fn){
    			var result = [];
    			this.forEach(function(value,index){
    				result.push(fn?fn(value,index):value);
    			});
    			return result;
    		}
    	}
		window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
		window.cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;

		var Animation = (function(){

			var cssKeys = {'fontSize':'px','width':'px','height':'px','opacity':'','left':'px','top':'px','transformOrigin':''};

			var cssTranslate = function(target,value,fn) {
			    var o = target && target.style,setAttr = function(o,key,val){
			    	o[key] = val;
			    	key = key.substr(0,1).toUpperCase()+key.substr(1);
			    	['webkit','Moz','ms','O'].forEach(function(prefix){
			    		o[prefix+key] = val;
			    	});
			    };

			    if(o){
			        //o.webkitTransitionDuration = o.MozTransitionDuration = o.msTransitionDuration = o.OTransitionDuration = o.transitionDuration = (time||0) + 'ms';
			        for (var key in value) {
			        	if(!value.hasOwnProperty(key))continue;
			        	var val = value[key];
			            if(key=='transform'||key == 'transition' || key =='transformOrigin')
			            	setAttr(o,key,val);
						else if(cssKeys.hasOwnProperty(key))
							o[key]=val;
			        }

			        //webkitTransformOrigin
			        //if(timing){
			            //o.webkitTransitionTimingFunction = o.msTransitionTimingFunction = o.MozTransitionTimingFunction= o.OTransitionTimingFunction = o.transitionTimingFunction = timing;
			        //}
			    }
			    if(target&&fn){
			        var events=['webkitTransitionEnd','msTransitionEnd','oTransitionEnd','otransitionend','transitionend'];
			        var proxy=function(){
			            events.forEach(function(eventName){
			                target.removeEventListener(eventName,proxy,false);
			            });
			            return fn();
			        };
			        events.forEach(function(eventName){
			            target.addEventListener(eventName,proxy,false);
			        });
			    }
			}

			function animationQueueClass($target){
				this.$target = $target;
				this.options = {};
				this.queue = [];
				this.time = 0;
			}
			animationQueueClass.prototype = {
				constructor : animationQueueClass,
				continueWith:function(options){
					this.queue.push(options);
					return this;
				},
				start:function(immediate){
					var that = this;
					//if(immediate) return this.process(this.queue.shift());
					window.requestAnimationFrame(function(){
						that.process(that.queue.shift());
					});
				},
				process:function(options){

					if(!options)return;
					for (var key in options) {
						if(!options.hasOwnProperty(key))continue;
						this.options[key]=options[key];
					}

					var that = this,options = this.options,callback = options.callback;
					var duration = options['duration']||0,delay = options['delay']||0;


					options.callback = null;
					var transition = [
						options['property']||'all',
						duration+'ms',
						options['timing']||'ease',
						delay+'ms'
					].join(' ');

					var perspective = options.perspective || 0,
						scale = options.scale || 1,
						scale3d = [options.scaleX||scale,options.scaleY||scale,options.scaleZ||scale],//x y z
						rotate = options.rotate || 0,
						rotate3d = [options.rotateX||rotate,options.rotateY||rotate,options.rotateZ||rotate],
						translate = options.translate || 0,
						translate3d = [options.translateX||translate,options.translateY||translate,options.translateZ||translate]
						;
					//rotate3d(1,1,1,0deg)
					var transform = [
						perspective>0&&('perspective('+perspective+'px)')||'',
						options.scale !== false && 'scale3d('+scale3d.join(',')+')' || '',
						rotate3d.map(function(value,index){
							if(value==0)return '';
							return (['rotateX','rotateY','rotateZ'][index]||'rotateX')+'('+value+'deg)';
						}).join(' '),
						translate3d.map(function(value,index){
							if(value==0)return '';
							return (['translateX','translateY','translateZ'][index]||'translateX')+'('+value+'px)';
						}).join(' ')
					].join(' ');

					var translateEnd = function(){
						callback&&callback();
						that.start(true);
					};

					var css = {
						transition:transition,
						transform:transform
					};
					for (var key in this.options) {
						if(!this.options.hasOwnProperty(key) || !cssKeys.hasOwnProperty(key))continue;
						css[key]=this.options[key]+cssKeys[key];
					}
					if(duration<1&&delay<1){
						this.cssTranslate(this.$target,css);
						requestAnimationFrame(translateEnd);
					}
					else{
						this.cssTranslate(this.$target,css,translateEnd);
					}

				},
				cssTranslate:cssTranslate
			};
			return {
				getInstance:function($target){
					return new animationQueueClass($target);
				},
				cssTranslate:cssTranslate
			}
		})();
		var time = 0,TIME_LINE = {
			GOD1:time+=2000,
			MY1:time+=2000,
			GOD2:time+=2000,
			MY2:time+=2000,
			GOD3:time+=2500,
			MY3:time+=4000,
			GOD4:time+=2000,
			END:time+=2000
		};

		(function() {
			var $message = document.getElementById('message2'),message = [$message.innerHTML];
			var appendMessage = function(msg,time){
				setTimeout(function(){
					message.push(msg);
					$message.innerHTML = message.join('');
				},time);
			};
			appendMessage('<p class="text-warning">嗯 年轻人，我感受到了你的虔诚!!!</p>',TIME_LINE.GOD1);
			appendMessage('<p>... ...</p>',TIME_LINE.MY1);
			appendMessage('<p class="text-warning">嗯 我要显现了</p>',TIME_LINE.GOD2);
			appendMessage('<p>啊... 佛主??</p>',TIME_LINE.MY2);
			appendMessage('<p class="text-warning">咦 发现一个bug! 吼 封印 南无阿弥陀佛~~~~</p>',TIME_LINE.GOD3);
			appendMessage('<p>额... ...</p>',TIME_LINE.MY3);
			appendMessage('<p class="text-warning">嗯.. 已修复</p>',TIME_LINE.GOD4);
			setTimeout(function(){
				$message.innerHTML = '';
			},TIME_LINE.END);
		})();



		(function() {
			var $message = document.getElementById('message1'),
				$gold = document.getElementById('gold'),
				$font = document.getElementById('bugFont'),
				moveTimer = null,
				time = 0,
				clientWidth = document.documentElement.offsetWidth || document.body.clientWidth,
				clientHeight = document.documentElement.offsetHeight || document.body.clientHeight,
				screenRect = {
					top:20,
					left:20,
					bottom:clientHeight -400- 20,
					right:clientWidth -400 - 40 -20
				},
				targetLeft = Math.round((screenRect.right-screenRect.left)/2+screenRect.left),
				targetTop = screenRect.bottom,
				vector = [Math.random()-0.5,Math.random()-0.5]
				;

			var getRandomColor = function(){
				return [
					'#',
					Math.round(Math.random()*256+256).toString(16).substr(1),
					Math.round(Math.random()*256+256).toString(16).substr(1),
					Math.round(Math.random()*256+256).toString(16).substr(1)
				].join('')
			},
			getRandomOffset = function(){
				return [
					Math.round(Math.random() * clientWidth),
					Math.round(Math.random() * clientHeight)
				];
			},
			aniColor = function(){
				setInterval(function(){
					$gold.style.color = getRandomColor();
				},700);
			},
			aniScale = function($target,scale){
				Animation.cssTranslate($target,{
					transition:'transform 300ms cubic-bezier(.44,.86,.91,1.24) 0ms',
					transform:'scale3d('+ [scale,scale,1].join(',') +')'
				});
			},
			startBugAnimation = function(){
				var pos = getRandomOffset(),
					$bugFont = document.getElementById('bugFont'),
					$fixFont = document.getElementById('fixFont')
				;

				$bugFont.style.display = 'table-cell';
				pos[0] = Math.max((pos[0]-80),80);
				pos[1] = Math.max((pos[1]-80),80);

				$bugFont.style.left = pos[0]+'px';
				$bugFont.style.top = pos[1]+'px';

				var targetPos = $fixFont.getBoundingClientRect && $fixFont.getBoundingClientRect()||{
					left:$fixFont.offsetLeft,
					top:$fixFont.offsetTop
				};
				var ani = Animation.getInstance($bugFont);
				
				ani.continueWith({
					property:'transform',
					timing:'cubic-bezier(.44,.86,.91,1.24)',
					perspective:100
				}).continueWith({
					duration:400,
					scale:2
				}).continueWith({
					timing:'',
					rotateY:90,
					callback:function(){
						$font.innerHTML ='求';
					}
				}).continueWith({
					duration:0,
					rotateY:270,
				}).continueWith({
					duration:400,
					rotateY:0,
					callback:function(){
						$bugFont.innerHTML ='<div class="ani-rotate">求</div>';
						/*
						.continueWith({
							duration:0,
							//transformOrigin:'0% 0%',//会影响动画定位效果 
							translateX:-24/2,
							translateY:-24/2
						})*/
					}
				}).continueWith({
					duration:2000,
					scale:0.25,
					translateX:(targetPos.left-pos[0]-18)*4,
					translateY:(targetPos.top-pos[1]-18)*4,
					callback:function(){
						$fixFont.innerHTML = '<span class="s1"><span class="s2">求</span></span>术';
						$fixFont.className = 'ani-font-translate';
					}
				}).continueWith({//发现如果god 进行left top 调整的时候 会影响 后续的 translateX动画，因此先进行定位 然后重新进行放大动画
					duration:0,
					translateX:0,
					translateY:0,
					//transformOrigin:'0% 0%',
					top:targetPos.top-18,
					left:targetPos.left-18
				}).continueWith({
					property:'all',
					duration:800,
					timing:'cubic-bezier(.44,.86,.91,1.24)',
					opacity:0,
					scale:0.75,
					callback:function(){
						$fixFont.className = 'ani-font-translate active';
						$font.style.display='none';
					}
				}).start();
				
			},
			refersh = function(x,y){
				targetLeft = Math.min(targetLeft,screenRect.right);
				targetLeft = Math.max(targetLeft,screenRect.left);
				targetTop = Math.min(targetTop,screenRect.bottom);
				targetTop = Math.max(targetTop,screenRect.top);
				$gold.style.left = targetLeft+'px';
				$gold.style.top = targetTop+'px';
			},
			shake = function(){
				targetTop += Math.round(Math.random()*10-5);
				targetLeft += Math.round(Math.random()*10-5);
			},
			move = function(){
				targetLeft += Math.round(10 * vector[0]);
				targetTop += Math.round(10 * vector[1]);
				if(targetLeft<=screenRect.left || targetLeft>=screenRect.right) vector[0] = -vector[0];
				if(targetTop<=screenRect.top || targetTop>=screenRect.bottom) vector[1] = -vector[1];
			},
			aniStart = function(fn){
				refersh();
				fn();
				moveTimer && window.cancelAnimationFrame(moveTimer);
				moveTimer = window.requestAnimationFrame(function(){
					aniStart(fn);
				});
			},
			aniStop = function(){
				moveTimer && window.cancelAnimationFrame(moveTimer);
			}
			;
			setTimeout(function(){
				$gold.style.display = 'block';
				aniColor();
				aniStart(move);
			},TIME_LINE.MY2-500);
			setTimeout(function(){
				aniScale($gold,1.3);
				aniStart(shake);
			},TIME_LINE.GOD3+2000);
			setTimeout(function(){
				startBugAnimation();
			},TIME_LINE.GOD3+2500);
			setTimeout(function(){
				aniScale($gold,1);
				aniStart(move);
			},TIME_LINE.GOD4);
		})();

    </script>
</body>
</html>
